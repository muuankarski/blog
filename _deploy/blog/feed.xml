<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>markuskainu.fi</title>
		<description>Social scientific research blog by Markus Kainu</description>
		<link>http://markuskainu.fi</link>
		<atom:link href="http://markuskainu.fi/blog/feed.xml" rel="self" type="application/rss+xml" />
		
			<item>
				<title>Visualising World Values Survey on a Map in R</title>
				<description>&lt;p&gt;I&amp;#39;m attending the &lt;em&gt;3rd international annual research conference: &amp;quot;Cultural and Economic changes under cross-national perspective&amp;quot;&lt;/em&gt; at the &lt;a href=&quot;http://lcsr.hse.ru/&quot;&gt;Laboratory for Comparative Social Reseach at the Moscow Higher School of Economics&lt;/a&gt; currently that gathers together scholars around the world interested in comparative social research. &lt;a href=&quot;https://rawgithub.com/muuankarski/attributions/master/attrib_slides.html&quot;&gt;in my presentation&lt;/a&gt; I used some spatial visualizations and therefore I received several questions on how to implement such illustrations. In this brief demonstration I will show how to visualize country level data from &lt;a href=&quot;http://www.worldvaluessurvey.org/&quot;&gt;World Values Survey&lt;/a&gt;(WVS) that is a widely used dataset in this context.&lt;/p&gt;

&lt;p&gt;I used the data for the first time yesterday when I downloaded the A &amp;amp; B datasets from year 2005. As I&amp;#39;m not familiar with dataset I won&amp;#39;t go into details of if, but just bluntly implement a simple workflow for these spatial illustrations.&lt;/p&gt;

&lt;h2&gt;Loading the WVS and extracting the summary statistics&lt;/h2&gt;

&lt;p&gt;Again due to my incompetence in using the data I&amp;#39;m not using any weights in deriving the summary statistics but just rely on the data as it is. If you want to improve this aspect you can consult for example &lt;a href=&quot;http://markuskainu.fi/r-tutorial/survey/&quot;&gt;my tutorial on using survey-package in R&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The variable of interest here is &lt;code&gt;V75: BE WILLING TO FIGHT IN WAR FOR YOUR COUNTRY&lt;/code&gt; as it was discussed in the presentation by professor Ronald Inglehart. I found it interesting in his presentation that all the Scandinavian countries had a relatively high rates for this willingness, and I felt that there may a spatial story behind this, ie. approximity to Russian Federation.&lt;/p&gt;

&lt;p&gt;The question behind the key variable is formulated as:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;V75. Of course, we all hope that there will not be another war, but if it were to come to that, would you be
willing to fight for your country? (Code one answer):&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;And it has values and labels as:&lt;/p&gt;

&lt;table&gt;
&lt;tr&gt;
&lt;th&gt;Value&lt;/th&gt;&lt;th&gt;Label&lt;/th&gt;
&lt;tr&gt;
&lt;tr&gt;
&lt;td&gt;-5&lt;/td&gt;&lt;td&gt;Missing; Unknown&lt;/td&gt;
&lt;tr&gt;
&lt;tr&gt;
&lt;td&gt;-4&lt;/td&gt;&lt;td&gt;Not asked&lt;/td&gt;
&lt;tr&gt;
&lt;tr&gt;
&lt;td&gt;-3&lt;/td&gt;&lt;td&gt;Not applicable&lt;/td&gt;
&lt;tr&gt;
&lt;tr&gt;
&lt;td&gt;-2&lt;/td&gt;&lt;td&gt;No answer&lt;/td&gt;
&lt;tr&gt;
&lt;tr&gt;
&lt;td&gt;-1&lt;/td&gt;&lt;td&gt;Don't know'&lt;/td&gt;
&lt;tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;&lt;td&gt;yes&lt;/td&gt;
&lt;tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;&lt;td&gt;no&lt;/td&gt;
&lt;tr&gt;
&lt;/table&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;

&lt;p&gt;I&amp;#39;m focusing only in the &lt;code&gt;yes&lt;/code&gt; or &lt;code&gt;no&lt;/code&gt; values, or in &lt;code&gt;yes&lt;/code&gt; in particular.&lt;/p&gt;

&lt;p&gt;The data is not provided in any generic for but only in proprietary SAS/SPSS/Stata format, but using &lt;strong&gt;foreign&lt;/strong&gt;-package it is doable. (a .csv or .Rdata would perhaps be a good idea in these days!)&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;foreign&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Load the oridinal dataset into R&lt;/span&gt;
datB &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; read.dta&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;~/workspace/data/wvs/wvs2005_v20090901b.dta&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
datA &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; read.dta&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;~/workspace/data/wvs/wvs2005_v20090901a.dta&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Create proportional tables from both data by country there are some issues&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# with country labels so I convert the variable into a string&lt;/span&gt;
datA&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;v2 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.character&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;datA&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;v2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
datB&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;v2 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.character&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;datB&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;v2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Create unweighted proportional tables from both datas&lt;/span&gt;
tblA &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.data.frame&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;prop.table&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;table&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;datA&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;v2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; datA&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;v75&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
tblB &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.data.frame&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;prop.table&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;table&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;datB&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;v2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; datB&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;v75&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Combine the tables&lt;/span&gt;
tbl &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; rbind&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;tblA&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; tblB&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# subset the tables to include only ues or no options&lt;/span&gt;
tbl2 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; tbl&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;tbl&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Var2 &lt;span class=&quot;o&quot;&gt;%in%&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;no&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
tbl2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Var2 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; factor&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;tbl2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Var2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; levels &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;no&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Distribution of answers by country as histogram&lt;/h2&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;## To nicely order the plot I will melt the data into wide format, reorder it&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## and convert it back to long format for plotting&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;reshape2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
orderDat &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; dcast&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;tbl2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Var1 &lt;span class=&quot;o&quot;&gt;~&lt;/span&gt; Var2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; value.var &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Freq&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
orderDat&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Var1 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; reorder&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;orderDat&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Var1&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; orderDat&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;yes&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; median&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
tblPlot &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; melt&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;orderDat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; id.vars &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Var1&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; measure.vars &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;no&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# And then the plot relevelling the levels to match the daulft colors better&lt;/span&gt;
tblPlot&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; factor&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;tblPlot&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; levels &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;no&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;tblPlot&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Var1&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; fill &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; variable&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_bar&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;stat &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;identity&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; 
    coord_flip&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; theme&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;legend.position &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;top&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; theme&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;axis.text.x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;size &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
    axis.text.y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;size &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; legend.text &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;size &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-11-14-world-values-survey-on-map/wvsBarplot.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;h2&gt;Plotting the data on the map&lt;/h2&gt;

&lt;h3&gt;Downloading the geographical data&lt;/h3&gt;

&lt;p&gt;Here I&amp;#39;m downloading the whole world shapefile from &lt;a href=&quot;http://www-mappinghacks.com&quot;&gt;www-mappinghacks.com&lt;/a&gt;. Of course there are many more options if available, but I picked it as it small size file but it still has the details needed. (I&amp;#39;m a novice in using world levels shapefiles fo please let me know of better resources).&lt;/p&gt;

&lt;p&gt;I greatly recommend you to familiarize yourself with theoretical literature of spatial reasoning in social sciences for example by reading &lt;a href=&quot;http://books.google.ru/books/about/The_Sociology_of_Spatial_Inequality.html?id=67P6jXQ05LAC&amp;amp;redir_esc=y&quot;&gt;&lt;em&gt;Lobao, Linda M., Gregory Hooks, ja Ann R. Tickamyer. The Sociology of Spatial Inequality. State University of New York Press, 2007.&lt;/em&gt;&lt;/a&gt; as well as with open source ecosystem for geographics information systems through &lt;a href=&quot;http://www.asdar-book.org/&quot;&gt;Bivand, Roger S., Edzer J. Pebesma, ja Virgilio Gómez-Rubio. Applied Spatial Data Analysis with R. 2. p. Springer, 2013.&lt;/a&gt;. &lt;a href=&quot;http://cran.r-project.org/web/views/Spatial.html&quot;&gt;CRAN Task View: Analysis of Spatial Data&lt;/a&gt; is a crucial resources if you want to push this approach further in your analysis. &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;download.file&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://www.mappinghacks.com/data/TM_WORLD_BORDERS-0.2.zip&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; destfile &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;NUTS_2010_60M_SH.zip&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# unzip to SpatialPolygonsDataFrame&lt;/span&gt;
unzip&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;NUTS_2010_60M_SH.zip&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rgdal&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
shape &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; readOGR&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dsn &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;./&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; layer &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;TM_WORLD_BORDERS-0.2&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# download.file(&amp;#39;http://www.mappinghacks.com/data/TM_WORLD_BORDERS-0.2.zip&amp;#39;,&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# destfile = &amp;#39;NUTS_2010_60M_SH.zip&amp;#39;) # unzip to SpatialPolygonsDataFrame&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# unzip(&amp;#39;NUTS_2010_60M_SH.zip&amp;#39;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rgdal&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# shape &amp;lt;- readOGR(dsn = &amp;#39;./&amp;#39;, layer = &amp;#39;TM_WORLD_BORDERS-0.2&amp;#39;)&lt;/span&gt;
shape &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; readOGR&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dsn &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;/home/aurelius/workspace/data/shapefiles/world/TM_WORLD_BORDERS_SIMPL-0.3/&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    layer &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;TM_WORLD_BORDERS_SIMPL-0.3&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## OGR data source with driver: ESRI Shapefile 
## Source: &amp;quot;/home/aurelius/workspace/data/shapefiles/world/TM_WORLD_BORDERS_SIMPL-0.3/&amp;quot;, layer: &amp;quot;TM_WORLD_BORDERS_SIMPL-0.3&amp;quot;
## with 246 features and 11 fields
## Feature type: wkbPolygon with 2 dimensions
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Converting the shape into data.frame and merging the attribute data with it&lt;/h3&gt;

&lt;p&gt;I&amp;#39;m taking a bit of a shortcut here as I&amp;#39;m converting the &lt;code&gt;SpatialPolygonDataFrame&lt;/code&gt; right away into regular &lt;code&gt;data.frame&lt;/code&gt; using &lt;code&gt;fortify&lt;/code&gt;-function from &lt;strong&gt;ggplot2&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Thereafter I will merge the &lt;code&gt;yes&lt;/code&gt; values from the WVS data summary. This merging is often problematic due to mismatch in the country names in different datasets. In this example I&amp;#39;m only changing the first letters of countrynames from WVS into uppercase and hope that match will happen. Most probably you would need to create a key table for perfect match.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# fortify the data&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
shape&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;id &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; rownames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;data&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.points &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; fortify&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; region &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; merge&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.points&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; shape&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# subset only the yeas options&lt;/span&gt;
yesDat &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; tblPlot&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;tblPlot&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Function the uppercase the first characters&lt;/span&gt;
.simpleCap &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    s &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; strsplit&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;
    paste&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;toupper&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;substring&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; substring&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; sep &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; collapse &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
yesDat&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Var1 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.character&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;yesDat&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Var1&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
yesDat&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Var1C &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; sapply&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;yesDat&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Var1&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; .simpleCap&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# merge the datas using country names&lt;/span&gt;
map.df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; merge&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; yesDat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; by.x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;NAME&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; by.y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Var1C&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; all.x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# order the data for smooth plotting&lt;/span&gt;
map.df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; map.df&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;order&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;order&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;A whole world using mercator projetion&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;group&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;group&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_polygon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;value&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_polygon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
               fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
               color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;white&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
               size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# white borders&lt;/span&gt;
  scale_fill_gradient2&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;low&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;white&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; high&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
    theme&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;legend.position&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;top&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-11-14-world-values-survey-on-map/wvsMercator.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;h3&gt;Using Orthographic projection centered at Moscow&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;group&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;group&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_polygon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;value&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_polygon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
               fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
               color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;white&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
               size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# white borders&lt;/span&gt;
  scale_fill_gradient2&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;low&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;white&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; high&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
    theme&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;legend.position&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;top&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
    coord_map&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;ortho&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; orientation&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;55&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;37&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-11-14-world-values-survey-on-map/wvsOrtho.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;p&gt;The grey stands for missing data that covers most of the countries. That is due to both missing data in VWS 2005 and errors in merging the attribute data with the shape. Also, the issue of spatial story behind the scandinavians willingness to fight wars did not become much clearer as a results of this one hour exercise.&lt;/p&gt;
</description>
				<pubDate>Thu, 14 Nov 2013 15:23:45 +0400</pubDate>
				<link>http://markuskainu.fi/blog/r-project/2013/11/14/world-values-survey-on-map.html</link>
				<guid isPermaLink="true">http://markuskainu.fi/blog/r-project/2013/11/14/world-values-survey-on-map.html</guid>
			</item>
		
			<item>
				<title>Markdown ja pandoc - tekstipohjaisen tieteellisen kirjoittamisen työvirta</title>
				<description>&lt;p&gt;Tässä kirjoituksessa esitellään tekstipohjainen työvirta digitaalisten tekstien kirjoittajalle, joka haluaa tehdä yksinkertaiset asiat yksinkertaisesti ja keskittyä monimutkaisten asioiden monimutkaisuuteen.&lt;/p&gt;

&lt;h2&gt;Digitaalisuus ja MS Wordin kuolema&lt;/h2&gt;

&lt;p&gt;Skottilaisen scifi-kirjailijan Charles Strossin lauantaina julkaisema blogiposti &lt;em&gt;&lt;a href=&quot;http://www.antipope.org/charlie/blog-static/2013/10/why-microsoft-word-must-die.html&quot;&gt;Why Microsoft Word must Die&lt;/a&gt;&lt;/em&gt; on herättänyt vilkasta keskustelua blogin kommenttiosiossa, ja tekstiä on jaettu ahkerasti sosiaalisessa mediassa viime päivinä. Stross on läpensä kyllästynyt Microsoftin tekstinkäsittelyohjelman yleiseen epätarkoituksenmukaisuuteen, tekniseen takapajuisuuteen sekä ansaitsemattomaan valta-asemaan ja haluaa sen kuolevan.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Microsoft Word is a tyrant of the imagination, a petty, unimaginative, inconsistent dictator that is ill-suited to any creative writer&amp;#39;s use. Worse: it is a near-monopolist, dominating the word processing field. Its pervasive near-monopoly status has brainwashed software developers to such an extent that few can imagine a word processing tool that exists as anything other than as a shallow imitation of the Redmond Behemoth. But what exactly is wrong with it?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Stross kirjoittaa ansiokkaasti siitä, mikä kaikki ohjelmassa on vialla kirjoja kirjoittavan ammattilaisen näkökulmasta. Tieteellisen kirjoittamisen näkökulmasta MS Wordissä on vialla huomattavasti useampi seikka kuin mihin Stross puuttuu, mutta silti sillä on yhä vankka asema myös tieteellisen kirjoittamisessa.&lt;/p&gt;

&lt;p&gt;Wordin suosion ja kelvottomuuden ydin on sen &lt;strong&gt;WYSIWYG&lt;/strong&gt;, eli &lt;em&gt;What You See Is What You Get&lt;/em&gt; (mitä näet, sitä saat) -tyyppinen käyttöliittymä. Useat ihmiset haluavat edelleen hahmottaa tekstinsä vasten valkoista A4-koodin paperia, vaikka yhä useampi teksti julkaistaan vain digitaalisessa muodossa (blogi,e-kirja,www-sivu, tms.) tai se tullaan taittamaan uudelleen ennen paperille tulostamista. Tämä on tietysti seurausta laajemmasta tiedonvälityksen digitalisoitumisesta, jota ei ole tarpeen tässä laajemmin käsitella kuin vain todeta että &lt;strong&gt;MS Wordin &lt;em&gt;What You See Is What You Get&lt;/em&gt; -lupaus pitää paikkansa koko ajan yhä harvemmin&lt;/strong&gt;. Kirjoittajat tuottavat tekstejä yhä laajemmalle kirjolle julkaisualustoja, mikä tarkoittanee MS Wordille nopeaa kuolemaa ja siihen luottaville kirjoittajille lisääntyviä ongelmia. &lt;/p&gt;

&lt;h2&gt;Lähdekoodiajattelu tieteellisessä kirjoittamisessa&lt;/h2&gt;

&lt;p&gt;Tämä blogipäivitys valmistaa lukijaansa Wordin kuolemaan esittelemällä nokkelan lähestymistavan digitaaliseen kirjoittamiseen. (mikäli kirjoitat käsin tai mekaanisella kirjoituskoneella et tule hyötymään tästä) Kutsun sitä &lt;em&gt;lähdekoodiajatteluksi kirjoittamisessa&lt;/em&gt; ja ajattelun ydin on siinä, että &lt;strong&gt;kirjoittaja laatii tekstistä &lt;em&gt;tekstimuotoisen lähdekoodin&lt;/em&gt;, joka käännetään kulloinkin tarvittavaan asiakirjaformaattiin&lt;/strong&gt;. Tässä esimerkissä teksti kirjoitetaan &lt;a href=&quot;http://daringfireball.net/projects/markdown/&quot;&gt;markdown&lt;/a&gt;-merkintäkielellä ja käännetään &lt;a href=&quot;http://johnmacfarlane.net/pandoc/README.html&quot;&gt;pandoc&lt;/a&gt;-dokumentinkääntäjällä haluttuun julkaisuformaattiin, joka voi olla esim: &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;HTML formaatit: XHTML, HTML5, ja HTML esitysgrafiikka käyttäen
&lt;a href=&quot;http://www.w3.org/Talks/Tools/Slidy&quot;&gt;Slidy&lt;/a&gt;,
&lt;a href=&quot;http://lab.hakim.se/reveal-js/&quot;&gt;reveal.js&lt;/a&gt;,
&lt;a href=&quot;http://goessner.net/articles/slideous/&quot;&gt;Slideous&lt;/a&gt;,
&lt;a href=&quot;http://meyerweb.com/eric/tools/s5/&quot;&gt;S5&lt;/a&gt;, tai
&lt;a href=&quot;http://paulrouget.com/dzslides/&quot;&gt;DZSlides&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Tekstinkäsittelyohjelmien formaatit: Microsoft Word
&lt;a href=&quot;http://www.microsoft.com/interop/openup/openxml/default.aspx&quot;&gt;docx&lt;/a&gt;,
OpenOffice/LibreOffice
&lt;a href=&quot;http://en.wikipedia.org/wiki/OpenDocument&quot;&gt;ODT&lt;/a&gt;, &lt;a href=&quot;http://opendocument.xml.org/&quot;&gt;OpenDocument
XML&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;E-kirjat: &lt;a href=&quot;http://en.wikipedia.org/wiki/EPUB&quot;&gt;EPUB&lt;/a&gt; version 2 or 3,
&lt;a href=&quot;http://www.fictionbook.org/index.php/Eng:XML_Schema_Fictionbook_2.1&quot;&gt;FictionBook2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt; Dokumentaatio-formaatit: &lt;a href=&quot;http://www.docbook.org/&quot;&gt;DocBook&lt;/a&gt;, &lt;a href=&quot;http://www.gnu.org/software/texinfo/&quot;&gt;GNU
TexInfo&lt;/a&gt;, &lt;a href=&quot;http://www.gnu.org/software/groff/groff.html&quot;&gt;Groff
man&lt;/a&gt; pages, &lt;a href=&quot;http://www.haskell.org/haddock/doc/html/ch03s08.html&quot;&gt;Haddock
markup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Outline-formaatit: &lt;a href=&quot;http://dev.opml.org/spec2.html&quot;&gt;OPML&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;TeX-formaatit: &lt;a href=&quot;http://www.latex-project.org/&quot;&gt;LaTeX&lt;/a&gt;,
&lt;a href=&quot;http://www.pragma-ade.nl/&quot;&gt;ConTeXt&lt;/a&gt;, LaTeX Beamer esitysgrafiikka&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Portable_Document_Format&quot;&gt;PDF&lt;/a&gt; via
LaTeX&lt;/li&gt;
&lt;li&gt;Kevyet merkintäkielet:
&lt;a href=&quot;http://daringfireball.net/projects/markdown/&quot;&gt;Markdown&lt;/a&gt;,
&lt;a href=&quot;http://docutils.sourceforge.net/docs/ref/rst/introduction.html&quot;&gt;reStructuredText&lt;/a&gt;,
&lt;a href=&quot;http://www.methods.co.nz/asciidoc/&quot;&gt;AsciiDoc&lt;/a&gt;, &lt;a href=&quot;http://www.mediawiki.org/wiki/Help:Formatting&quot;&gt;MediaWiki
markup&lt;/a&gt;, Emacs
&lt;a href=&quot;http://orgmode.org&quot;&gt;Org-Mode&lt;/a&gt;,
&lt;a href=&quot;http://redcloth.org/textile&quot;&gt;Textile&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Kustomoidut formaatit: &lt;a href=&quot;http://www.lua.org&quot;&gt;lua&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Kun tekstistä on olemassa &lt;em&gt;tekstimuotoinen lähdekoodi&lt;/em&gt; täytyy kirjoittajan ylläpitää vain tätä yhtä tekstiä ja kaikki muut formaatit on käännettävissä tästä lähteestä tarpeen mukaan. Tekstimuotoinen lähdekoodi luo puitteet myös kunnollisen versionhallinnan, kuten &lt;a href=&quot;http://linux.fi/wiki/Git&quot;&gt;git&lt;/a&gt;:in käytölle. Sillä on myös monia muita etuja, joista kenties myöhemmissä kirjoituksissa lisää.&lt;/p&gt;

&lt;h2&gt;Tekstipohjaisen kirjoittamisen ohjelmistoympäristö&lt;/h2&gt;

&lt;p&gt;Tekstin kirjoittamiseen tietokoneella vaaditaan vain &lt;a href=&quot;http://fi.wikipedia.org/wiki/Tekstieditori&quot;&gt;tekstieditori&lt;/a&gt;, joista &lt;em&gt;muistio/notepad&lt;/em&gt; lienee Windows-käyttäjille tutuin. &lt;a href=&quot;http://en.wikipedia.org/wiki/List_of_text_editors&quot;&gt;Wikipediassa&lt;/a&gt; on kattava lista editoreista, mutta hyvään alkuun pääsee Windowsissa &lt;a href=&quot;http://notepad-plus-plus.org/&quot;&gt;notepad++&lt;/a&gt;:lla ja OS X:ssä esim. &lt;a href=&quot;http://aquamacs.org/&quot;&gt;Aquamacs&lt;/a&gt;-emacs-pohjaisella editorilla. Linux-jakeluiden oletuseditorit ovat aivan kelpoja.&lt;/p&gt;

&lt;p&gt;Markdown on tekstipohjainen merkintäkieli, joten sen kirjoittaminen ei vaadi kuin tekstieditorin. Markdown-muotoisen lähdekoodin kääntämiseen haluttuun formaattiin tarvitaan jo aiemmin mainittu pandoc, jota kehittää aktiivisesti Berkeleyn yliopiston filosofian professorin &lt;a href=&quot;http://johnmacfarlane.net/&quot;&gt;John MacFarlane&lt;/a&gt;. Mikäli haluat kääntää tekstin tieteellisissä julkaisuissa suosittuun &lt;a href=&quot;http://fi.wikipedia.org/wiki/Latex&quot;&gt;LaTeX&lt;/a&gt;-formaattiin, niin sinun tulee asentaa koneellesi myös LaTeX. Alla on ohjeet sekä pandocin että latexin asentamiseen:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://johnmacfarlane.net/pandoc/installing.html&quot;&gt;Pandoc:in asentaminen linuxiin, Mac OS X:ään ja Windowsiin&lt;/a&gt;  - latauksen ja asennuksen kesto n. 30s.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.latex-project.org/ftp.html&quot;&gt;Latex:in asentaminen linuxiin, Mac OS X:ään ja Windowsiin&lt;/a&gt; - latauksen ja asennuksen kesto n. 60 min.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Seuraava esimerkki perustuu uusimpaan pandocin versioon &lt;a href=&quot;http://johnmacfarlane.net/pandoc/releases.html#pandoc-1.12.0.2-2013-09-20&quot;&gt;pandoc 1.12.0.2 (2013-09-20)&lt;/a&gt;.&lt;/p&gt;

&lt;h2&gt;Esimerkki tieteellisen tekstin lähdekoodista&lt;/h2&gt;

&lt;p&gt;Seuraavassa esiteltävä minimaalinen esimerkki sisältää: &lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;julkaisun tekstin markdown-muodossa sekä&lt;/li&gt;
&lt;li&gt;viitattujen julkaisujen bibliografiset tiedot &lt;a href=&quot;http://en.wikipedia.org/wiki/BibTeX&quot;&gt;BibTeX&lt;/a&gt;-muodossa.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3&gt;1. teksti markdown-muodossa&lt;/h3&gt;

&lt;p&gt;Tekstin alussa on &lt;a href=&quot;http://en.wikipedia.org/wiki/YAML&quot;&gt;YAML&lt;/a&gt;-muotoinen metadata-osio, johon tulee dokumentin metatiedot. Muilta osin teksti noudattelee markup-syntaxia lisättynä kahdella matemaattisella kaavalla sekä erityyppisillä lähdeviittauksilla kahteen artikkeliin. Merkintäkieli on helppolukuista myös &lt;em&gt;lähdekoodi&lt;/em&gt;-muodossaan. Tässä demossa lähdeviitetiedoston nimi on &lt;em&gt;teksti.md&lt;/em&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;o&quot;&gt;---&lt;/span&gt;
title&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;&amp;#39;Esimerkkiteksti kirjoitettuna markdown-merkintäkielellä&amp;#39;&lt;/span&gt;
author&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; Markus Kainu
affiliation&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; Turun yliopisto
date&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; Lokakuu &lt;span class=&quot;m&quot;&gt;2013&lt;/span&gt;
bibliography&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; bibtex.bib
lang&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; finnish
tags&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;markdown&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; pandoc&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;kc&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Suhteellisuusteoriasta ja Higgsin bosonista&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;## Suhteellisuusteoriasta&lt;/span&gt;

Lorem ipsum&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;einstein1935can dolor sit amet&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; consectetur adipiscing elit. Etiam at augue et quam placerat tristique &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;s. &lt;span class=&quot;m&quot;&gt;12-15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;einstein1935can&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;. 

&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;e &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; mc&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;

Vestibulum ante ipsum &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-@&lt;/span&gt;einstein1935can&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; primis &lt;span class=&quot;kr&quot;&gt;in&lt;/span&gt; faucibus orci luctus et ultrices posuere cubilia Curae&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; Mauris imperdiet sem odio&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; at pharetra mauris congue dignissim.

&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;Massa aiheuttaa poikkeaman avaruuden geometriassa&lt;span class=&quot;p&quot;&gt;](&lt;/span&gt;http&lt;span class=&quot;o&quot;&gt;://&lt;/span&gt;upload.wikimedia.org&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;wikipedia&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;commons&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;Spacetime_curvature.png&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; Alaviitteen teksti on tässä.

&lt;span class=&quot;c1&quot;&gt;## Higgsin bosonista&lt;/span&gt;

Donec tortor justo&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; venenatis sodales fermentum ut&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; eleifend sit amet lorem. Curabitur rutrum faucibus leo&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; nec porttitor est consequat sit amet. &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;lee1977weak&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;Tiettyjen partikkeleiden välisten suhteiden standardi&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;mallin mukainen tiivistelmä&lt;span class=&quot;p&quot;&gt;](&lt;/span&gt;kuvat&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;higgs.png&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

Lorem ipsum dolor &lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;lee1977weak &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;s. &lt;span class=&quot;m&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; sit amet&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; consectetur adipiscing elit. Etiam at augue et quam placerat tristique. 

&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;M_Z&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;\frac&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;v\sqrt&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;g&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;g&lt;span class=&quot;s&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;}^2}}2$&lt;/span&gt;

Vestibulum ante ipsum primis &lt;span class=&quot;kr&quot;&gt;in&lt;/span&gt; faucibus orci luctus et ultrices posuere cubilia Curae&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; Mauris imperdiet sem odio&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; at pharetra mauris congue dignissim. Donec tortor justo&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; venenatis sodales fermentum ut&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; eleifend sit amet lorem. Curabitur rutrum faucibus leo&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; nec porttitor est consequat sit amet.

&lt;span class=&quot;c1&quot;&gt;# Taulukot&lt;/span&gt;

Table&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; Einsteinin lapset

Syntymäaika Etunimet        Sukunimi    Sukupuoli
&lt;span class=&quot;o&quot;&gt;---------&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;--------&lt;/span&gt;        &lt;span class=&quot;o&quot;&gt;--------&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;----------&lt;/span&gt;
&lt;span class=&quot;m&quot;&gt;14.05.1904&lt;/span&gt;  Hans&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Albert    Einstein    mies
&lt;span class=&quot;m&quot;&gt;28.06.1910&lt;/span&gt;  Eduard          Einstein    mies

&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;Lähde&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;wikipedia&lt;span class=&quot;p&quot;&gt;](&lt;/span&gt;http&lt;span class=&quot;o&quot;&gt;://&lt;/span&gt;fi.wikipedia.org&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;wiki&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;Albert_Einstein&lt;span class=&quot;c1&quot;&gt;#Einsteinin_avioliitot)*&lt;/span&gt;


&lt;span class=&quot;c1&quot;&gt;# Lähdeviitteet&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;2. lähdeviitteet BiBTeX-muodossa&lt;/h3&gt;

&lt;p&gt;Kenties yksinkertaisin tapa käyttää lähdeviitteitä on LaTeX-ladontajärjestelmästä tuttu &lt;a href=&quot;http://en.wikipedia.org/wiki/BibTeX&quot;&gt;BibTeX&lt;/a&gt;-muoto. Viitteet on mahdollista viedä kaikista viitteidenhallintaohjelmista ko. muotoiseen tekstitiedostoon. Google Scholar -palvelun hakutuloksissa on mm. &lt;a href=&quot;http://www.youtube.com/watch?v=SsJSR2b4_qc&quot;&gt;suora linkki osuman bibliografisten tietojen lataamiseen BibTeX-muodossa&lt;/a&gt;. Tässä demossa lähdeviitetiedoston nimi on &lt;em&gt;bibtex.bib&lt;/em&gt; ja se näyttää seuraavalta:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;article&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;einstein1935can&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  title&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;Can quantum&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;mechanical description of physical reality be considered complete&lt;span class=&quot;o&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  author&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;Einstein&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Albert and Podolsky&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Boris and Rosen&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Nathan&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  journal&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;Physical review&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  volume&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;47&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  number&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  pages&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;777&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  year&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1935&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  publisher&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;APS&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;article&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;lee1977weak&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  title&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;Weak interactions at very high energies&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; The role of the Higgs&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;boson mass&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  author&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;Lee&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Benjamin W and Quigg&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Chris and Thacker&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Harry B&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  journal&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;Physical Review D&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  volume&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  number&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  pages&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1519&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  year&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1977&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  publisher&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;APS&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Dokumentin kääntäminen pandoc-ohjelmalla&lt;/h2&gt;

&lt;p&gt;Pandoc-ohjelmaan ei ole olemassa graafista käyttöliittymää, vaan komennot tulee ajaa ns. &lt;em&gt;komentorivissä&lt;/em&gt;. Windowsissa komentorivi voi olla hankalasti löydettävissä, mutta oheinen Jyväskylän yliopiston ohje auttaa asiassa: &lt;a href=&quot;http://users.jyu.fi/%7Enieminen/ohj1/materiaalia/tyokaluohjeet/komentorivi_selviytyminen.html#komentorivit-windowsissa-command-prompt&quot;&gt;Komentorivit Windowsissa: Command Prompt&lt;/a&gt;. OS X:ssä komentorivin saa auki klikkailemalla: &lt;code&gt;Applications&amp;gt;Utilities&amp;gt;Terminal&lt;/code&gt;. Linuxissa pikanäppäin &lt;code&gt;Ctrl + Alt + t&lt;/code&gt;avaa päätteen.&lt;/p&gt;

&lt;p&gt;Kun olet avannut komentorivin, sinun tulee vaihtaa hakemistoksi se hakemistoksi, jossa lähdekoodisi sijaitsee. Mikäli se on kansio &lt;code&gt;essee&lt;/code&gt; työpöydällä, niin oikea komento voisi olla &lt;code&gt;cd desktop/essee&lt;/code&gt;. Komentorivin komennot eroavat eri käyttöjärjestelmissä hieman, joten katso apua täältä: &lt;a href=&quot;http://users.jyu.fi/%7Enieminen/ohj1/materiaalia/tyokaluohjeet/komentorivi_selviytyminen.html&quot;&gt;Selviytymisopas: Komentorivin käyttö&lt;/a&gt; tai käytä googlea.&lt;/p&gt;

&lt;p&gt;Kun olet saanut navigoitua itsesi oikeaan hakemistoon komentorivillä tulee sinun enää syöttää komento, joka kääntää lähdekoodin haluamaasi formaattiin. Erityisen yksinkertaisissa käännöksissä riittää yleensä &lt;code&gt;pandoc lahdekoodi.md -o haluttu_formaatti.xxx&lt;/code&gt;. &lt;a href=&quot;http://johnmacfarlane.net/pandoc/README.html&quot;&gt;Pandocin ohjeista&lt;/a&gt; löytyy miltei rajaton määrä ohjeita kääntämisen hienosäätämiseen. Alla on komennot yleisimpiin käännöksiin siten, että myös matemaattiset kaavat sekä lähdeviitteet generoituvat käännettäessä.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# latex-pdf -muotoon&lt;/span&gt;
pandoc teksti.md &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;o teksti.pdf &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;toc &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;number&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;section &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;latexmathml &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;filter pandoc&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;citeproc
&lt;span class=&quot;c1&quot;&gt;# .html-muotoon&lt;/span&gt;
pandoc &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;s teksti.md &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;o teksti.html &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;toc &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;number&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;section &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;latexmathml &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;filter pandoc&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;citeproc
&lt;span class=&quot;c1&quot;&gt;# .odt-muotoon&lt;/span&gt;
pandoc teksti.md &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;o teksti.odt &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;toc &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;number&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;section &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;latexmathml &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;filter pandoc&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;citeproc
&lt;span class=&quot;c1&quot;&gt;# .docx-muotoon&lt;/span&gt;
pandoc teksti.md &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;o teksti.docx &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;toc &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;number&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;section &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;latexmathml &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;filter pandoc&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;citeproc
&lt;span class=&quot;c1&quot;&gt;# .epub-muotoon&lt;/span&gt;
pandoc teksti.md &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;o teksti.epub &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;toc &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;number&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;section &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;latexmathml &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;filter pandoc&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;citeproc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Lataukset&lt;/h2&gt;

&lt;h3&gt;Lähdekoodi, viitetiedot, kuvat ja komennot zipattuna&lt;/h3&gt;

&lt;p&gt;Zipatussa paketissa on lähdeteksti (teksti.md), viitteet (bibtex.bib), pandoc-komennot (komennot.md) sekä kansio &lt;code&gt;kuvat&lt;/code&gt;, jossa kuva higgs.png. Toinen kuva tulee suoraan wikipediasta.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://markuskainu.fi/material/blog/pandocmarkdown2013/demo.zip&quot;&gt;demo.zip&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Esimerkkiteksti eri formaateissa&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://markuskainu.fi/material/blog/pandocmarkdown2013/teksti.pdf&quot;&gt;teksti.pdf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://markuskainu.fi/material/blog/pandocmarkdown2013/teksti.html&quot;&gt;teksti.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://markuskainu.fi/material/blog/pandocmarkdown2013/teksti.odt&quot;&gt;teksti.odt&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://markuskainu.fi/material/blog/pandocmarkdown2013/teksti.docx&quot;&gt;teksti.docx&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://markuskainu.fi/material/blog/pandocmarkdown2013/teksti.epub&quot;&gt;teksti.epub&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;html-käännös ilman tyylitiedostoa näyttää nykypäivän silmään luotaantyöntävältä ja sitä voi ehostaa esim. tämän css-tiedoston avulla: &lt;a href=&quot;http://markuskainu.fi/material/css/article.css&quot;&gt;markuskainu.fi/material/css/article.css&lt;/a&gt;. Voit lisätä sen lähdekoodiin vaikkapa metatietojen alle oheisella koodilla&lt;/p&gt;

&lt;p&gt;&lt;code&gt;&amp;lt;link href=&amp;quot;http://markuskainu.fi/material/css/article.css&amp;quot;&lt;/code&gt;
&lt;code&gt;rel=&amp;quot;stylesheet&amp;quot; type=&amp;quot;text/css&amp;quot; title=&amp;quot;compact&amp;quot;&amp;gt;&amp;lt;/link&amp;gt;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Muotoiltu html-muotoinen teksti näyttäisi sitten tältä: &lt;a href=&quot;http://markuskainu.fi/material/blog/pandocmarkdown2013/teksti_css.html&quot;&gt;teksti_css.html&lt;/a&gt;&lt;/p&gt;

&lt;h2&gt;Lopuksi&lt;/h2&gt;

&lt;p&gt;Kirjoituksessa kuvattu työvirta ei tietenkään ole virheetön saati ns. &lt;em&gt;valmis&lt;/em&gt;, mutta toimii hyvin jo tällaisenaan. Aivan erityisen hyödylliseksi kuvatun kaltainen työvirta tulee, mikäli tieteellinen tutkimus sisältää laskennallista analyysiä, jonka tuloksia (taulukoita, kuvioita) tekstissä esitellään. Mm. R-kielessä on olemassa erinomainen ekosysteemi laskennallisen analyysin ja sitä kuvaavan tekstin kirjoittamiseen rinnakkain yhteen tekstiin. Tähän ns. &lt;em&gt;toistettavan analyysin&lt;/em&gt; lähdetymistapaan voi tutustua englanniksi juuri julkaistussa kirjassa &lt;a href=&quot;http://www.crcpress.com/product/isbn/9781482203530&quot;&gt;Xie, Yihui. 2014. Dynamic Documents with R and Knitr&lt;/a&gt; (&lt;a href=&quot;https://github.com/yihui/knitr-book&quot;&gt;kirjan lähde githubissa&lt;/a&gt;) tai suomeksi vaikka osoitteessa: &lt;a href=&quot;http://markuskainu.fi/workshop/toistettava/&quot;&gt;markuskainu.fi/workshop/toistettava/&lt;/a&gt;. Asiaa käsiteltäneen myös tässä blogissa syksyn aikana. &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Kysymyksiä ja kommentteja rohkeasti tuohon alapuolelle!&lt;/strong&gt;&lt;/p&gt;
</description>
				<pubDate>Tue, 15 Oct 2013 14:53:45 +0400</pubDate>
				<link>http://markuskainu.fi/blog/tools/2013/10/15/markdown-pandoc-tieteellinen-teksti.html</link>
				<guid isPermaLink="true">http://markuskainu.fi/blog/tools/2013/10/15/markdown-pandoc-tieteellinen-teksti.html</guid>
			</item>
		
			<item>
				<title>Maddison Project database in R</title>
				<description>&lt;h2&gt;Economic data in R&lt;/h2&gt;

&lt;p&gt;There is a growing trend of new methods for assessing economic data in R. Packages as &lt;a href=&quot;https://github.com/vincentarelbundock/WDI&quot;&gt;WDI: World Development indicators&lt;/a&gt;, &lt;a href=&quot;http://www.quandl.com/help/packages/r&quot;&gt;Quandl&lt;/a&gt;, &lt;a href=&quot;http://cran.r-project.org/web/packages/pwt/index.html&quot;&gt;pwt: Penn World Table&lt;/a&gt;. Also the &lt;strong&gt;data sets&lt;/strong&gt; -section in  &lt;a href=&quot;http://cran.r-project.org/web/views/Econometrics.html&quot;&gt;CRAN Task View: Computational Econometrics&lt;/a&gt; is worth looking.&lt;/p&gt;

&lt;h2&gt;Maddison Project database&lt;/h2&gt;

&lt;p&gt;One which is seemingly missing is the mighty &lt;a href=&quot;http://www.ggdc.net/maddison/maddison-project/home.htm&quot;&gt;Maddison Project database&lt;/a&gt; that is often used especially by economic historians. Data includes estimates of economic growth in the world economic between &lt;strong&gt;AD 1 and 2010&lt;/strong&gt;. A major update was done in January 2013 and a detailed documentation of that update can be read from &lt;a href=&quot;http://www.ggdc.net/maddison/maddison-project/publications/wp4.pdf&quot;&gt;Bolt and Van Zanden (2013). The First Update of the Maddison Project; Re-Estimating Growth Before 1820, Maddison Project Working Paper 4.&lt;/a&gt;. The actual data as .xlsx-file is here: &lt;a href=&quot;http://www.ggdc.net/maddison/maddison-project/data/mpd_2013-01.xlsx&quot;&gt;mpd_2013-01.xlsx&lt;/a&gt;&lt;/p&gt;

&lt;h2&gt;The Exercise&lt;/h2&gt;

&lt;p&gt;Below is a stepwise explanation on how to visualize the data.&lt;/p&gt;

&lt;h3&gt;Load the data&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;gdata&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
url &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;http://www.ggdc.net/maddison/maddison-project/data/mpd_2013-01.xlsx&amp;quot;&lt;/span&gt;
dat &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; read.xls&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; header &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; skip &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; stringsAsFactors &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Manipulating the data&lt;/h3&gt;

&lt;p&gt;Excel-sheets usually require some processing in R. Below I&amp;#39;m removing row not needed and melting the data in long format, and convert in to numerical.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;column.names &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.character&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
column.names&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;year&amp;quot;&lt;/span&gt;
df.mad &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; dat&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df.mad&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; column.names
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;reshape2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
df.mad.l &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; melt&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df.mad&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; id.vars &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;year&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
df.mad.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;value &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.numeric&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df.mad.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;value&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
df.mad.l &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; df.mad.l&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;is.na&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df.mad.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;value&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Subset the data&lt;/h3&gt;

&lt;p&gt;My research emphasises in post-socialist space and therefore I will subset the data. In addition to post-socialist countries I&amp;#39;m including some Western countries, too.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;cntry.list &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Czech Republic&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Estonia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Hungary&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Bulgaria&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Latvia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s&quot;&gt;&amp;quot;Lithuania&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Poland&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Slovakia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Slovenia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Romania&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Albania&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Bosnia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s&quot;&gt;&amp;quot;Bulgaria&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Croatia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Macedonia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Montenegro&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Kosovo&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Serbia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Armenia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s&quot;&gt;&amp;quot;Azerbaijan&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Belarus&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Georgia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Kazakhstan&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Kyrgyzstan&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Moldova&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s&quot;&gt;&amp;quot;Mongolia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Russia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Tajikistan&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Ukraine&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Uzbekistan&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;F. USSR&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s&quot;&gt;&amp;quot;USA&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Japan&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Finland&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Sweden&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;stringr&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
df.mad.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_trim&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df.mad.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; side &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;both&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
df.mad.l2 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; df.mad.l&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;df.mad.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;%in%&lt;/span&gt; cntry.list&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then I will group the countries in one sensible way.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;car&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
df.mad.l2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;group&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;df.mad.l2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;%in%&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Czech Republic&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Estonia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Hungary&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s&quot;&gt;&amp;quot;Bulgaria&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Latvia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Lithuania&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Poland&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Slovakia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Slovenia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Romania&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s&quot;&gt;&amp;quot;Bulgaria&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;CEE&amp;quot;&lt;/span&gt;
df.mad.l2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;group&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;df.mad.l2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;%in%&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Albania&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Bosnia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Croatia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Macedonia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s&quot;&gt;&amp;quot;Montenegro&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Kosovo&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Serbia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Balkan&amp;quot;&lt;/span&gt;
df.mad.l2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;group&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;df.mad.l2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;%in%&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Armenia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Azerbaijan&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Belarus&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s&quot;&gt;&amp;quot;Georgia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Kazakhstan&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Kyrgyzstan&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Moldova&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Mongolia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Russia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s&quot;&gt;&amp;quot;Tajikistan&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Ukraine&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Uzbekistan&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;CIS&amp;quot;&lt;/span&gt;
df.mad.l2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;group&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;df.mad.l2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;%in%&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;USA&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Japan&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Finland&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Sweden&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;WEST&amp;quot;&lt;/span&gt;
df.mad.l2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;group&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;df.mad.l2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;%in%&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;F. USSR&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;USSR&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Plotting the data from 1850 to 2010&lt;/h3&gt;

&lt;p&gt;As I mentioned in the beginning the data extends for over 2000 years. My interest is more of contemporary nature, so I will subset data to cover only the last 160 years from 1850 to 2010. Also, I will add some major historical events during that period that have had an effect on economic growth, too.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; df.mad.l2&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;df.mad.l2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;year &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1850&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; group &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; variable&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; group&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_line&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_point&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; df.mad.l2&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;df.mad.l2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;year &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 
    &lt;span class=&quot;m&quot;&gt;2010&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; label &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; variable&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; annotate&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;rect&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    xmin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1914&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; xmax &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1918&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; ymin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; ymax &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;20000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; alpha &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; annotate&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1916&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;21000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; label &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;WW1&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; annotate&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;rect&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; xmin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1939&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; xmax &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1945&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    ymin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; ymax &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;20000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; alpha &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; annotate&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1942&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;21000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    label &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;WW2&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; annotate&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;segment&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1991&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; xend &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1991&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; yend &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;30000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    colour &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; annotate&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1991&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;31000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; label &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Dissolution of \n the Soviet Union&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; 
    theme_minimal&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; theme&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;legend.position &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;top&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-09-17-economic-history-dataset-in-r/maddison5.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;
</description>
				<pubDate>Tue, 17 Sep 2013 14:53:45 +0400</pubDate>
				<link>http://markuskainu.fi/blog/r-project/2013/09/17/economic-history-dataset-in-r.html</link>
				<guid isPermaLink="true">http://markuskainu.fi/blog/r-project/2013/09/17/economic-history-dataset-in-r.html</guid>
			</item>
		
			<item>
				<title>ESA2013-conference - Where did the scholars come from?</title>
				<description>&lt;p&gt;I went to Turin in Italy last week for the annual conference of European Sociological Association. It was my first time in this event and I was surprised by the extend of it. I flew home last night and though it would be interesting to see which universities and which geographical regions were best represented in the conference. Based on walking and talking for few days I was expecting Finns to do rather well. On the other hand, as the conference was themed around the current &lt;em&gt;crises&lt;/em&gt; I was assuming that scholars from crises ridden countries would be around in numbers to discuss some real issues in their societies.&lt;/p&gt;

&lt;p&gt;Without thinking too much I decided to&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;count the participants by each university and create a histogram of the most well represented one and &lt;/li&gt;
&lt;li&gt;geocode those universities and visualize them to see if there are any East-West or South-North issues in it.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;As this post aims to show who were participating at ESA2013, but also how to run such simple analysis in R, I&amp;#39;m leaving the code there. You can copy-paste it to your R-console and it should work with the required packages installed.  &lt;/p&gt;

&lt;h2&gt;Parsing the data&lt;/h2&gt;

&lt;p&gt;As for &lt;strong&gt;data&lt;/strong&gt; I use the up-to-date conference program at &lt;a href=&quot;http://www.esa11thconference.eu/programme&quot;&gt;http://www.esa11thconference.eu/programme&lt;/a&gt;. It is obvious from the html code of the website the program is presented in one large html-table. Therefore I may apply &lt;code&gt;readHTMLtable&lt;/code&gt;-function from &lt;strong&gt;XML&lt;/strong&gt;-package  to extract the participants with their universities and titles of their presentations.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;XML&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
url &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;http://www.esa11thconference.eu/programme&amp;quot;&lt;/span&gt;
x &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; readHTMLTable&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; header &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
x &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; x&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;
whole.program &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.character&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;V1&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
head&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;whole.program&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## [1] &amp;quot;PS Plenary Sessions&amp;quot;                                                                                                                                                                              
## [2] &amp;quot;28/8 17:30 - 20:00 - Piazza Castello, Teatro Regio\r\n                            01PS - Opening Plenary: Crisis and Critique&amp;quot;                                                                    
## [3] &amp;quot;ESA-4838 Finance in Crisis - the neglected critique of money\n                                ORAL PRESENTATION\r\n                                Mary Mellor, Northumbria University, Newcastle&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;You could participate in three waysm, with&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;an oral presentation,&lt;/li&gt;
&lt;li&gt;a poster, or &lt;/li&gt;
&lt;li&gt;a distributed paper&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;For this analysis I need only the university/institution from each presentations, so extracting only that information using &lt;em&gt;regular expressions&lt;/em&gt;. &lt;strong&gt;Some papers were collaborative works with multiple authors, but my analysis will only include the affliation of the author listed last in the program. This may cause significant bias in the results.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;However, below we can see the top six universities in all three categories.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;I did a rough manual check to see if there are some universities missing due to misspelling etc. Higher schoolf of Economics from Moscow was written in three different ways and edited the names a bit to for them to merge&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;oral &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; grep&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;ORAL PRESENTATION&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; whole.program&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; value &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
poster &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; grep&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;POSTER&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; whole.program&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; value &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
distributed &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; grep&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;DISTRIBUTED PAPER&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; whole.program&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; value &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;stringr&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## ORAL PRESENTATION&lt;/span&gt;
oral &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_extract&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;oral&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;((\r\n))+.*&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
oral &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;oral&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;(\r\n)+ *&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
oral &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;oral&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;.*, &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## harminising HSE moscow&lt;/span&gt;
oral &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;oral&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
oral &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;oral&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;- &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## &lt;/span&gt;
oral.df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.data.frame&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;table&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;oral&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;oral.df&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;University&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Freq&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
head&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;oral.df&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;order&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;oral.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Freq&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;##                 University Freq
## 791 University of Helsinki   41
## 916    University of Turin   40
## 929   University of Warsaw   36
## 212       Ghent University   29
## 346                 Lisbon   25
## 350                 London   25
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;## POSTER&lt;/span&gt;
poster &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_extract&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;poster&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;((\r\n))+.*&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
poster &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;poster&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;(\r\n)+ *&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
poster &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;poster&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;.*, &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## harminising HSE moscow&lt;/span&gt;
poster &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;poster&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
poster &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;poster&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;- &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
poster.df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.data.frame&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;table&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;poster&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;poster.df&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;University&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Freq&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
head&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;poster.df&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;order&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;poster.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Freq&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;##                 University Freq
## 19 Kurgan State University    3
## 25                  Moscow    3
## 8                   Cracow    2
## 50   University of Bologna    2
## 63     University of Tartu    2
## 1        Aarhus University    1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;## DISTRIBUTED&lt;/span&gt;
distributed &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_extract&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;distributed&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;((\r\n))+.*&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
distributed &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;distributed&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;(\r\n)+ *&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
distributed &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;distributed&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;.*, &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## harminising HSE moscow&lt;/span&gt;
distributed &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;distributed&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
distributed &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;distributed&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;- &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
distributed.df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.data.frame&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;table&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;distributed&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;distributed.df&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;University&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Freq&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
head&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;distributed.df&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;order&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;distributed.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Freq&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;##                                 University Freq
## 45                  University of Helsinki    4
## 22                                  Moscow    3
## 27 St. Petersburg State Medical University    3
## 47                  University of Lausanne    3
## 16                 Kore University of Enna    2
## 1                                  Antalya    1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;As both, the &lt;em&gt;poster&lt;/em&gt; and the &lt;em&gt;distributed paper&lt;/em&gt; category are small, I will merge them to the &lt;em&gt;oral presentation&lt;/em&gt; category.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;esa.data &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; rbind&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;oral.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; poster.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; distributed.df&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Which universities had ten or more scholars attending the conference?&lt;/h2&gt;

&lt;p&gt;As we now have our data formatted, we can plot the universities that had a team of ten or more scholars participating the conference.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;plot.df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; esa.data&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;order&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;esa.data&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Freq&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
plot.df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; plot.df&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;plot.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Freq &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# add ranking numbers to university names&lt;/span&gt;
plot.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;rank &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; rank&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;plot.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Freq&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
plot.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;RankUniversity &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; paste&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;plot.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;rank&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; plot.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;University&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; sep &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# order the data&lt;/span&gt;
order &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; plot.df&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;order&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;plot.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Freq&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
plot.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;RankUniversity &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; factor&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;plot.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;RankUniversity&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; levels &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; order&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;RankUniversity&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Plot the histogram&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;plot.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; RankUniversity&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Freq&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; label &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Freq&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_bar&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;stat &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;identity&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    position &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;dodge&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;hjust &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;-0.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; size &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; coord_flip&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; 
    theme_minimal&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-09-02-esa2013-participants/plot1.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;p&gt;What caught my eye first is the strong presence of Finnish universities on the list. Helsinki at the top and four others in top 33. Not surprisingly, Italian Universities are well represented, too.&lt;/p&gt;

&lt;h3&gt;Where are those universities located?&lt;/h3&gt;

&lt;p&gt;To get a better understanding of which parts oh the Europe were represented at the conference it may be useful to plot the universities on map. &lt;/p&gt;

&lt;p&gt;First, we have to geocode the universities. I&amp;#39;m using Google maps here and the &lt;code&gt;geocode&lt;/code&gt;from &lt;strong&gt;ggmap&lt;/strong&gt;-package. (Note that in most cases by using this function you are agreeing to the Google Maps API Terms of Service at &lt;a href=&quot;https://developers.google.com/maps/terms&quot;&gt;https://developers.google.com/maps/terms&lt;/a&gt;)&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggmap&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
location &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.character&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;plot.df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;University&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
code &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; geocode&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;location&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; output &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;latlon&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;latlona&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;more&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;all&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; messaging &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    sensor &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; override_limit &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
spat.data &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; cbind&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;location&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; code&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
plot.df2 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; merge&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;plot.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; spat.data&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; by.x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;University&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; by.y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;location&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
head&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;plot.df2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;##                           University Freq rank
## 1                             Ankara   15 21.0
## 2 Autonomous University of Barcelona   10 45.5
## 3                             Berlin   20  8.5
##                            RankUniversity    lon   lat
## 1                               21 Ankara 32.854 39.92
## 2 45.5 Autonomous University of Barcelona  2.173 41.39
## 3                              8.5 Berlin 13.406 52.52
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Second, we shall download a detailed &lt;em&gt;shapefile&lt;/em&gt; of Europe from &lt;a href=&quot;http://epp.eurostat.ec.europa.eu/portal/page/portal/gisco_Geographical_information_maps/popups/references/administrative_units_statistical_units_1&quot;&gt;gisco&lt;/a&gt; at the scale of 1:60 million, fortify it into &lt;code&gt;data.frame&lt;/code&gt; and merge our data on university locations with it. This part follows my example from here: &lt;a href=&quot;http://markuskainu.fi/r-tutorial/eurostat/spatial.html&quot;&gt;Spatial visualisation of Eurostat Regional Data&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;download.file&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://epp.eurostat.ec.europa.eu/cache/GISCO/geodatafiles/NUTS_2010_60M_SH.zip&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    destfile &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;NUTS_2010_60M_SH.zip&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# unzip to SpatialPolygonsDataFrame&lt;/span&gt;
unzip&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;NUTS_2010_60M_SH.zip&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rgdal&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; readOGR&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dsn &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;./NUTS_2010_60M_SH/data&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; layer &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;NUTS_RG_60M_2010&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## OGR data source with driver: ESRI Shapefile 
## Source: &amp;quot;./NUTS_2010_60M_SH/data&amp;quot;, layer: &amp;quot;NUTS_RG_60M_2010&amp;quot;
## with 1920 features and 4 fields
## Feature type: wkbPolygon with 2 dimensions
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;map &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; subset&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; STAT_LEVL_ &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rgeos&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;id &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; rownames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;data&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.points &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; fortify&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; region &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; merge&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.points&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; map&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And then we shall plot the map.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# plot faceted by year&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;group&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;group&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_polygon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
               fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
               color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;grey80&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
               size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# white borders&lt;/span&gt;
  geom_point&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; plot.df2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;lon&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                  y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                  group&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;University&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                  size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Freq&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
               color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; alpha&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;shape&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; 
  coord_map&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;project&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;orthographic&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; xlim&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
              ylim&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# projection&lt;/span&gt;
  theme_minimal&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-09-02-esa2013-participants/mapplot1.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;p&gt;Spatial view gives perhaps a better view to see which regions/countries we represented and which we not. There seems to be conventration by Gulf of Finland (Estonia &amp;amp; Finland), in Poland and on both sides of English Channel in addition to Italy. &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# plot faceted by year&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;group&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;group&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_polygon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
               fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
               color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;grey80&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
               size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# white borders&lt;/span&gt;
  geom_point&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; plot.df2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;lon&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                  y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                  group&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;University&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                  size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Freq&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
               color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; alpha&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;shape&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;  
  geom_text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; plot.df2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;lon&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                  y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                 label&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;University&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
                                 group&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;University&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
            size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;3.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;vjust&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;color&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;dim grey&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; 
  coord_map&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;project&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;orthographic&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; xlim&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
              ylim&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# projection&lt;/span&gt;
  theme_minimal&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-09-02-esa2013-participants/mapplot2.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;h2&gt;Visualizing all participants on a map&lt;/h2&gt;

&lt;p&gt;Sure, some of the readers will say that we had several universities with nine scholars attending, let say from Germany. As a final plot, I have included all the participants and geocoded them on the map below. Each dot represents one presentation, poster or distributed paper. (this takes some processing time from Google..)&lt;/p&gt;

&lt;p&gt;This block of code processes and geocodes the data.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;stringr&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

whole &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; grep&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;ORAL PRESENTATION|POSTER|DISTRIBUTED PAPER&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; whole.program&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; value &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## WHOLE PROGRAM&lt;/span&gt;
whole &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_extract&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;whole&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;((\r\n))+.*&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
whole &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;whole&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;(\r\n)+ *&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
whole &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;whole&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;.*, &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## harminising HSE moscow&lt;/span&gt;
whole &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;whole&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
whole &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;whole&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;- &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## geocoding each individual paper Extracting unique locations and geocode&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## them&lt;/span&gt;
uniq &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; unique&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;whole&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggmap&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
coord &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; geocode&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;uniq&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; output &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;latlon&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;latlona&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;more&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;all&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; messaging &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    sensor &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; override_limit &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
spat.data &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; cbind&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;uniq&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; coord&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
whole.df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.data.frame&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;whole&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
plot.df3 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; merge&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;whole.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; spat.data&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; by.x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;whole&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; by.y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;uniq&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And finally we shall plot it on map. I&amp;#39;m using jittered plotting with transparency to tackle problem of overplotting the dots. As a results the locations are not correctly showed, but it is perhaps more informative for this purpose.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# plot faceted by year&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;group&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;group&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_polygon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
               fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
               color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;grey80&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
               size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# white borders&lt;/span&gt;
  geom_point&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; plot.df3&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;lon&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                  y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                  group&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;whole&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
               color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; alpha&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;shape&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             position&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;position_jitter&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;width&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;height&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; 
  coord_map&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;project&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;orthographic&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; xlim&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
              ylim&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# projection&lt;/span&gt;
  theme_minimal&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-09-02-esa2013-participants/mapplot3.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;p&gt;This figure adds a lot to the two previous plots. It seems that other countries were also present there, just that the participants came from a greater number of universities. Ex-Jugoslavian countries and Bulgaria could perhaps have been better represented at the conference. A strong participation from Russia and Turkey is obvious.&lt;/p&gt;

&lt;h2&gt;Conclusions&lt;/h2&gt;

&lt;p&gt;Eventhough the conference was themed after the current crisis, scholars from the most crises ridden countries were under represented in the conference. This may well be one of the consequences of crisis or just pure coincidence.&lt;/p&gt;

&lt;p&gt;Finnish scholars seem to well in this comparison. Whether it is the well-budgeted travel funds or just high ambition to contribute at the international level, I don&amp;#39;t know. However, interaction with other European scholars is a thing to embrace.&lt;/p&gt;

&lt;p&gt;Feel free to re-use the code and advance the analysis. As we all know, it&amp;#39;s not just the quantity, but the quality that matters. I will leave that part for someone else.&lt;/p&gt;
</description>
				<pubDate>Tue, 03 Sep 2013 22:13:45 +0400</pubDate>
				<link>http://markuskainu.fi/blog/r-project/2013/09/03/esa2013-participants.html</link>
				<guid isPermaLink="true">http://markuskainu.fi/blog/r-project/2013/09/03/esa2013-participants.html</guid>
			</item>
		
			<item>
				<title>ESA 2013 conference presentation</title>
				<description>&lt;p&gt;I gave a presentation today (29th of August) at &lt;a href=&quot;http://www.esa11thconference.eu/home&quot;&gt;ESA2020&lt;/a&gt; with Dr. Mikko Niemelä titled &lt;em&gt;Attributions for poverty in Post-Socialist Countries&lt;/em&gt; in a session &lt;em&gt;Rethinking and Theorizing the Experience of Transformations in Eastern and Central European Societies&lt;/em&gt;. Thank you everyone for the comments! We had some techical difficulties so if you&amp;#39;re interested, please look at the slides from below. &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://markuskainu.fi/material/presentation/TorinoSlides2013_final.html&quot;&gt;in html-format&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://markuskainu.fi/material/presentation/TorinoSlides2013_final.pdf&quot;&gt;in pdf-format&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
				<pubDate>Thu, 29 Aug 2013 21:26:45 +0400</pubDate>
				<link>http://markuskainu.fi/blog/conference/2013/08/29/esa-conference-slides.html</link>
				<guid isPermaLink="true">http://markuskainu.fi/blog/conference/2013/08/29/esa-conference-slides.html</guid>
			</item>
		
			<item>
				<title>rustfare-package: Spatial visualization using Global Administrative Areas -data</title>
				<description>&lt;p&gt;rustfare has functions for downloading a spatial shapefile from &lt;a href=&quot;http://www.gadm.org/&quot;&gt;Global Administrative Areas (GADM)&lt;/a&gt; database that can be further used to for example plot the data from Rosstat regional data.&lt;/p&gt;

&lt;p&gt;In this post I will demonstrate how to access GADM geographical data and how to combine data from Rosstat Regional Statistics with GADM to visualize the data.&lt;/p&gt;

&lt;h2&gt;Accessing the GADM data using rustfare-package&lt;/h2&gt;

&lt;p&gt;Function &lt;code&gt;GetRusGADM()&lt;/code&gt; downloads the shapefile at desired level and returns a &lt;code&gt;SpatialPolygonDataFrame&lt;/code&gt;. &lt;code&gt;Level&lt;/code&gt; argument accepts four values:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;federal&lt;/code&gt;: whole country&lt;/li&gt;
&lt;li&gt;&lt;code&gt;federal_districts&lt;/code&gt;: Federal districts (8)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;region&lt;/code&gt;: administrative boundaries at the level of federal regions/oblasts (82)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rayon&lt;/code&gt;: administrative boundaries at the level of rayons/krais&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;shapefile &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; GetRusGADM&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;level&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Plotting shapefiles&lt;/h2&gt;

&lt;p&gt;Once you have downloaded the &lt;code&gt;SpatialPolygonDataFrame&lt;/code&gt; you can plot the  the boundaries at different level with following code chunks.&lt;/p&gt;

&lt;h3&gt;At federal level&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rustfare&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
shapefile &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; GetRusGADM&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;federal&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
plot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shapefile&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-12-rustfare-spatial-visualization-gadm/map1.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;h3&gt;At federal district level&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rustfare&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
shapefile &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; GetRusGADM&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;federal_district&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
plot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shapefile&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-12-rustfare-spatial-visualization-gadm/map2.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;h3&gt;At regional level&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rustfare&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
shapefile &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; GetRusGADM&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;region&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
plot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shapefile&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-12-rustfare-spatial-visualization-gadm/map3.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;h3&gt;At rayon level&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rustfare&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
shapefile &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; GetRusGADM&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;rayon&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
plot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shapefile&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-12-rustfare-spatial-visualization-gadm/map4.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;h2&gt;Merging Rosstat Regional data and visualising it&lt;/h2&gt;

&lt;p&gt;In the below I will show two ways to visualise the data. I&amp;#39;m more familiar with &lt;strong&gt;ggplot2&lt;/strong&gt;-graphics, and here I&amp;#39;m also taking it a bit further than using &lt;code&gt;spplot&lt;/code&gt;-function from &lt;strong&gt;sp&lt;/strong&gt;-package.&lt;/p&gt;

&lt;h3&gt;Using maptools and sp&lt;/h3&gt;

&lt;p&gt;I&amp;#39;m downloading data on life expectancy of men at regional level from Rosstat.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rustfare&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
dat &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; GetRosstat&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;life_expectancy_men&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;region&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
dat09 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; subset&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; year &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2009&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then I&amp;#39;m downloading the shapefile at federal districh level, naming the rows as required for &lt;code&gt;spCbind&lt;/code&gt;-function, ordering the datas and then combining them&lt;/p&gt;

&lt;p&gt;To be able to join the data they both must have a) equal number of rows and b) the rownames must match. Lets first give both data rownames that can be used in combining the data. Then let&amp;#39;s order the both datas according to rownames. At last, lets see if there are same number of rows in both datas.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;shape &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; GetRusGADM&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;region&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;maptools&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Remove case with NA id_shape (moscow)&lt;/span&gt;
dat09 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; dat09&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;is.na&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat09&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;id_shape&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat09&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; dat09&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;id_shape
row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.character&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;ID_1&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
dat09 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; dat09&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;order&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat09&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
shape &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; shape&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;order&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
dim&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat09&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## [1] 80  7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;dim&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## [1] 82 16
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;As we deleted some cases from Rosstat data it now has two cases less than &lt;code&gt;SpatialPolygonDataFrame&lt;/code&gt; before, we have to remove those rows from &lt;code&gt;SpatialPolygonDataFrame&lt;/code&gt;. To find out what they are we use `setdiff()-function and we can see they are 2521 and 2530. We remove them and combine the datas.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;setdiff&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat09&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## [1] &amp;quot;2521&amp;quot; &amp;quot;2530&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;shape &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; shape&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%in%&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;2521&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;2530&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; spCbind&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; dat09&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Simple grey scale plot can be done as follow&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;sp&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
spplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; col.regions &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; grey.colors&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-12-rustfare-spatial-visualization-gadm/mapcombine3.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;h2&gt;Using ggplot2&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ggplot2&lt;/strong&gt; is not perhaps the ideal choice for plotting spatial data as &lt;code&gt;SpatialPolygonDataFrame&lt;/code&gt; has to be converted into regular data.frame using &lt;code&gt;fortify&lt;/code&gt; and this procedure cannot be reversed very easy. However, once you have fortified the data you can take advantage of all the neat functionalities of ggplot2-package.&lt;/p&gt;

&lt;p&gt;We will use the code above for the great part. As we want to plot all the years available as facets of the same plot we have to alter the code in two ways. First, not to subset the data and, second, to convert it into &lt;strong&gt;wide&lt;/strong&gt; format from the default &lt;strong&gt;long&lt;/strong&gt; format that &lt;strong&gt;rustfare&lt;/strong&gt; provides you with. Data will be &lt;strong&gt;casted&lt;/strong&gt; into wide format using &lt;code&gt;dcast&lt;/code&gt;-function in &lt;strong&gt;reshape2&lt;/strong&gt;-package.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rustfare&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
dat &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; GetRosstat&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;life_expectancy_men&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;region&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# cast the data into wide format&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;reshape2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
dat.w &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; dcast&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; region_en &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; id_shape &lt;span class=&quot;o&quot;&gt;~&lt;/span&gt; year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; value.var &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then the data in wide format will be joined with shapefile from GADM.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;shape &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; GetRusGADM&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;region&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;maptools&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
dat.w &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; dat.w&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;is.na&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat.w&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;id_shape&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat.w&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; dat.w&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;id_shape
row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.character&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;ID_1&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
dat.w &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; dat.w&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;order&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat.w&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
shape &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; shape&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;order&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# from above&lt;/span&gt;
difference &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; setdiff&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat.w&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
shape &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; shape&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%in%&lt;/span&gt; difference&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; spCbind&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; dat.w&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then the &lt;code&gt;SpatialPolygonDataFrame&lt;/code&gt; must be converted into regular &lt;code&gt;data.frame&lt;/code&gt;, and I&amp;#39;m using the &lt;code&gt;fortify&lt;/code&gt;-function from &lt;strong&gt;ggplot2&lt;/strong&gt;-package for it. We also need *&lt;em&gt;rgeos&lt;/em&gt;-package for this conversion.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rgeos&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;id &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; rownames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;data&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.points &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; fortify&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; region &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; merge&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.points&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
dim&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## [1] 541696     28
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;head&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;##     id  long   lat order  hole piece  group ID_0 ISO NAME_0 ID_1 NAME_1
## 1 2511 39.65 45.16     1 FALSE     1 2511.1  190 RUS Russia 2511 Adygey
## 2 2511 39.68 45.16     2 FALSE     1 2511.1  190 RUS Russia 2511 Adygey
##                                                                           VARNAME_1
## 1 Adygea|Adygeya|Adygheya|Republic of Adygeya|Adygeyskaya A.Obl.|Respublika Adygeya
## 2 Adygea|Adygeya|Adygheya|Republic of Adygeya|Adygeyskaya A.Obl.|Respublika Adygeya
##           NL_NAME_1 HASC_1 CC_1     TYPE_1 ENGTYPE_1 VALIDFR_1 VALIDTO_1
## 1 ?????????? ??????  RU.AD 4301 Respublika  Republic   Unknown   Present
## 2 ?????????? ??????  RU.AD 4301 Respublika  Republic   Unknown   Present
##   REMARKS_1 Shape_Leng Shape_Area region_en id_shape X2000 X2005 X2009
## 1      &amp;lt;NA&amp;gt;      9.508     0.9129    Adygea     2511 62.07 61.91 64.38
## 2      &amp;lt;NA&amp;gt;      9.508     0.9129    Adygea     2511 62.07 61.91 64.38
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now data we want to visualize is as a regular &lt;code&gt;data.frame&lt;/code&gt; and ready for plotting. But one more thing is need: &lt;strong&gt;ggplot2&lt;/strong&gt; eats data in long format, so we have to melt the data into long format using &lt;code&gt;melt&lt;/code&gt;-function from &lt;strong&gt;reshape2&lt;/strong&gt;-package.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# As we want to plot map faceted by years 2000, 2005 and 2009 we have to&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# melt it into long format&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;reshape2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.df.l &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; melt&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; id.vars &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;long&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;lat&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;group&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; measure.vars &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;X2000&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s&quot;&gt;&amp;quot;X2005&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;X2009&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# lets tweak a bit and remove X&amp;#39;s from year values and make it into&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# numerical&lt;/span&gt;
map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;X&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; factor&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.numeric&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;levels&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable&lt;span class=&quot;p&quot;&gt;))[&lt;/span&gt;map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
dim&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df.l&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## [1] 1625088       6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;As a result we get rather massive data with 1625088 rows and 6 columns. We can then plot this using the following command.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# plot faceted by year&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df.l&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;group&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;group&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_polygon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;fill &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_polygon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; map.df.l&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
               fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
               color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;white&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
               size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# white borders&lt;/span&gt;
  coord_map&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;project&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;orthographic&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            xlim&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;170&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
              ylim&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  facet_wrap&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;variable&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; ncol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  theme_minimal&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-12-rustfare-spatial-visualization-gadm/rmapcombineggplot5.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;h3&gt;Plotting the changes from 2000 to 2009&lt;/h3&gt;

&lt;p&gt;Let&amp;#39;s take advantage of data we got after we merged the Rosstat data into &lt;code&gt;SpatialPolygonDataFrame&lt;/code&gt;, which is &lt;code&gt;df&lt;/code&gt;. Let&amp;#39;s calculate the change from 2000 to 2009 and fortify the data into data.frame. And then we point that &lt;strong&gt;ggplot2&lt;/strong&gt; applies red colors for negative values (where life expectancy has worsened) and green color fot positive values (where life expectancy has improved).&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;change &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;X2009 &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;X2000&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;X2000&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;
df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;X2000 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;NULL&lt;/span&gt;
df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;X2005 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;NULL&lt;/span&gt;
df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;X2009 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;NULL&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rgeos&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;id &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; rownames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;data&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.points &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; fortify&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; region &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; merge&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.points&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;reshape2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.df.l &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; melt&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
                 id.vars &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;long&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
                             &lt;span class=&quot;s&quot;&gt;&amp;quot;lat&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;group&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
                 measure.vars &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;change&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df.l&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;group&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;group&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_polygon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;fill &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  scale_fill_gradient2&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;low &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; high &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;green&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_polygon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; map.df.l&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
               fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
               color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;white&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
               size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# white borders&lt;/span&gt;
  coord_map&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;project&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;orthographic&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            xlim&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;170&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
              ylim&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  theme_minimal&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-12-rustfare-spatial-visualization-gadm/rmapcombineggplot6.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;h3&gt;RosstatMapPlot()-function&lt;/h3&gt;

&lt;p&gt;There is a &lt;code&gt;RosstatMapPlot&lt;/code&gt;-function in rustfare that takes &lt;code&gt;measure&lt;/code&gt;, &lt;code&gt;year&lt;/code&gt; and &lt;code&gt;level&lt;/code&gt; as arguments and plots maps using the somewhat similar procedure as above. Have a look at examples below.&lt;/p&gt;

&lt;h3&gt;Infant mortality rate at regional level&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rustfare&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
RosstatMapPlot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;infant_mortality_rate&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2010&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;region&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-12-rustfare-spatial-visualization-gadm/rosstatmap1.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;h3&gt;Average pension size at federal district level&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rustfare&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
RosstatMapPlot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;average_size_of_pensions&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2010&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;federal_district&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-12-rustfare-spatial-visualization-gadm/rosstatmap2.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;
</description>
				<pubDate>Mon, 12 Aug 2013 15:53:45 +0400</pubDate>
				<link>http://markuskainu.fi/blog/r-project/2013/08/12/rustfare-spatial-visualization-gadm.html</link>
				<guid isPermaLink="true">http://markuskainu.fi/blog/r-project/2013/08/12/rustfare-spatial-visualization-gadm.html</guid>
			</item>
		
			<item>
				<title>rustfare-package and using Rosstat regional statistics</title>
				<description>&lt;p&gt;I have been working on Russian statistical data a lot during this year. However, accessing many open data sources has proven to be cumbersome. One example is mighty &lt;a href=&quot;http://www.gks.ru/wps/wcm/connect/rosstat_main/rosstat/ru/statistics/publications/catalog/doc_1138623506156&quot;&gt;regional data resource by Rosstat&lt;/a&gt;. To facilitate access to this and other data sources I begun to write package for R-language called &lt;a href=&quot;http://markuskainu.fi/rustfare&quot;&gt;rustfare&lt;/a&gt;. Below you find some key characteristics of the rustfare at this point in time. It will be improved and extended constantly so make sure you have the latest version installed and that you follow the up-to-date instructions. I will announce major updates through this blog and my twitter.&lt;/p&gt;

&lt;h2&gt;rustfare-package&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;The rustfare package pools together tools for searching, extracting, and formatting welfare data on Russian Federation from different data providers. &lt;/li&gt;
&lt;li&gt;The rustfare functions are named according to data provider or the data set. &lt;/li&gt;
&lt;li&gt;Currently there is data available from: 

&lt;ul&gt;
&lt;li&gt;Rosstat Regional Statistics, &lt;/li&gt;
&lt;li&gt;OECD, &lt;/li&gt;
&lt;li&gt;Quality of Governance -institute and&lt;/li&gt;
&lt;li&gt;GADM database of Global Administrative Areas. &lt;/li&gt;
&lt;li&gt;World Bank World Development Indicators on Russian Federation can be accessed using &lt;a href=&quot;http://cran.r-project.org/web/packages/WDI/index.html&quot;&gt;WDI-package&lt;/a&gt; (for examples, see: &lt;a href=&quot;http://markuskainu.fi/r-tutorial/wb/&quot;&gt;markuskainu.fi/r-tutorial/wb/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Currently I&amp;#39;m working on incorporating also &lt;a href=&quot;http://std.gmcrosstata.ru/webapi/opendatabase?id=vpn2002_pert&quot;&gt;census data from 2002&lt;/a&gt; and &lt;a href=&quot;http://www.vybory.izbirkom.ru/region/region/izbirkom?action=show&amp;amp;root=1&amp;amp;tvd=100100028713304&amp;amp;vrn=100100028713299&amp;amp;region=0&amp;amp;global=1&amp;amp;sub_region=0&amp;amp;prver=0&amp;amp;pronetvd=null&amp;amp;vibid=100100028713304&amp;amp;type=233&quot;&gt;election data from duma election 2011&lt;/a&gt; with the package&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Installation&lt;/h2&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;devtools&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
install_github&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;repo &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;rustfare&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; username &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;muuankarski&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rustfare&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Examples: Rosstat regional statistics&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://www.gks.ru/wps/wcm/connect/rosstat_main/rosstat/ru/statistics/publications/catalog/doc_1138623506156&quot;&gt;Rosstat regional statistic&lt;/a&gt; includes values of the indicators on three levels:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;federal level&lt;/li&gt;
&lt;li&gt;federal district level&lt;/li&gt;
&lt;li&gt;regional level&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;To dowload the data you may use &lt;code&gt;GetRosstat()&lt;/code&gt;-function that requires two arguments, &lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;indicator&lt;/code&gt; (from the listing above), &lt;/li&gt;
&lt;li&gt;&lt;code&gt;level&lt;/code&gt; (federal/federal_district/region)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The code below returns a dataset at &lt;strong&gt;federal district level&lt;/strong&gt; on &lt;strong&gt;infant mortality&lt;/strong&gt; and plots a line graph over time.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rustfare&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# load rustfare for obtaining the data&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# load ggplot2 for plotting&lt;/span&gt;
dat &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; GetRosstat&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;infant_mortality_rate&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;federal_district&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
head&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# print the first 6 rows of data.frame&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;##        id_name                               region year value
## 1 дальневокруг Дальневосточный\r\nфедеральный округ 1995  20.5
## 2 дальневокруг Дальневосточный\r\nфедеральный округ 2001  18.1
## 3 дальневокруг Дальневосточный\r\nфедеральный округ 2000  18.6
##                           region_ru                    region_en
## 1 Дальневосточный федеральный округ Far Eastern Federal District
## 2 Дальневосточный федеральный округ Far Eastern Federal District
## 3 Дальневосточный федеральный округ Far Eastern Federal District
##              level id_shape             indicator
## 1 federal_district        4 infant_mortality_rate
## 2 federal_district        4 infant_mortality_rate
## 3 federal_district        4 infant_mortality_rate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; region_en&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_point&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_line&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; 
    geom_text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; subset&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; year &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2010&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; region_en&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
        label &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; region_en&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; size &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; hjust &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; theme&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;legend.position &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;none&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-08-rustfare-rosstat-regional/rosstat.png&quot; alt=&quot;Infant mortality rates at federal district level&quot;&gt; &lt;/p&gt;

&lt;p&gt;Next chunk of code extracts the same indicators but at the regional level&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rustfare&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# load rustfare for obtaining the data&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# load ggplot2 for plotting&lt;/span&gt;
dat &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; GetRosstat&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;infant_mortality_rate&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;region&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
head&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# print the first 6 rows of data.frame&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;##           region       region_en year value  level id_shape
## 1 Алтайский край Altai Territory 2005  11.5 region     2513
## 2 Алтайский край Altai Territory 1995  20.8 region     2513
## 3 Алтайский край Altai Territory 2008   9.1 region     2513
##               indicator
## 1 infant_mortality_rate
## 2 infant_mortality_rate
## 3 infant_mortality_rate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; region_en&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_point&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_line&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; 
    geom_text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; subset&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; year &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2010&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; region_en&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
        label &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; region_en&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; size &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; hjust &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; theme&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;legend.position &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;none&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-08-rustfare-rosstat-regional/rosstat2.png&quot; alt=&quot;Infant mortality rates at regional level&quot;&gt; &lt;/p&gt;
</description>
				<pubDate>Thu, 08 Aug 2013 19:53:45 +0400</pubDate>
				<link>http://markuskainu.fi/blog/r-project/2013/08/08/rustfare-rosstat-regional.html</link>
				<guid isPermaLink="true">http://markuskainu.fi/blog/r-project/2013/08/08/rustfare-rosstat-regional.html</guid>
			</item>
		
			<item>
				<title>Spatial visualisation of Eurostat regional data</title>
				<description>&lt;p&gt;This is only a a brief description how to access and use spatial shapefiles of Europe published by EUROSTAT at &lt;a href=&quot;http://epp.eurostat.ec.europa.eu/portal/page/portal/gisco_Geographical_information_maps/popups/references/administrative_units_statistical_units_1&quot;&gt;Administrative units / Statistical units&lt;/a&gt;. Here I&amp;#39;m using the 1:60 million scale Shapefile from year 2010.&lt;/p&gt;

&lt;p&gt;As a plotted data we use the nuts2-level rates of material deprivation which we import from EUROSTAT on page using &lt;a href=&quot;http://cran.r-project.org/web/packages/SmarterPoland/index.html&quot;&gt;SmarterPoland-package&lt;/a&gt;.(see &lt;a href=&quot;http://markuskainu.fi/r-tutorial/eurostat/smarterpoland.html&quot;&gt;SmarterPoland-package&lt;/a&gt; for more examples)&lt;/p&gt;

&lt;h2&gt;Importing the data&lt;/h2&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;SmarterPoland&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; getEurostatRaw&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;kod &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;ilc_mddd21&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;xx&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2011&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2003&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;unit &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; lapply&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;strsplit&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;as.character&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;xx&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;,&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;[&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;geo.time &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; lapply&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;strsplit&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;as.character&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;xx&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;,&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;[&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

df.l &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; melt&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; id.vars &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;geo.time&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; measure.vars &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;2003&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;2004&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s&quot;&gt;&amp;quot;2005&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;2006&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;2007&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;2008&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;2009&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;2010&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;2011&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;geo.time &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; unlist&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;geo.time&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# unlist the geo.time variable&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Load the GISCO shapefile, subset it to NUTS2-level and merge the Eurostat attribute data with it into single &lt;code&gt;SpatialPolygonDataFrame&lt;/code&gt;&lt;/h2&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;download.file&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://epp.eurostat.ec.europa.eu/cache/GISCO/geodatafiles/NUTS_2010_60M_SH.zip&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    destfile &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;NUTS_2010_60M_SH.zip&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# unzip to SpatialPolygonsDataFrame&lt;/span&gt;
unzip&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;NUTS_2010_60M_SH.zip&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rgdal&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; readOGR&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dsn &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;./NUTS_2010_60M_SH/data&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; layer &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;NUTS_RG_60M_2010&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## OGR data source with driver: ESRI Shapefile 
## Source: &amp;quot;./NUTS_2010_60M_SH/data&amp;quot;, layer: &amp;quot;NUTS_RG_60M_2010&amp;quot;
## with 1920 features and 4 fields
## Feature type: wkbPolygon with 2 dimensions
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# as the data is at NUTS2-level, we subset the spatialpolygondataframe&lt;/span&gt;
map_nuts2 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; subset&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; STAT_LEVL_ &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# dim show how many regions are in the spatialpolygondataframe&lt;/span&gt;
dim&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map_nuts2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## [1] 467   4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# dim show how many regions are in the data.frame&lt;/span&gt;
dim&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## [1] 223  13
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Spatial dataframe has 467 rows and attribute data 223.  We need to make&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# attribute data to have similar number of rows&lt;/span&gt;
NUTS_ID &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.character&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map_nuts2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;NUTS_ID&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
VarX &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; rep&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;empty&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;467&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
dat &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;NUTS_ID&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; VarX&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# then we shall merge this with Eurostat data.frame&lt;/span&gt;
dat2 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; merge&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; by.x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;NUTS_ID&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; by.y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;geo.time&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; all.x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## merge this manipulated attribute data with the spatialpolygondataframe&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## there are still duplicates in the data, remove them&lt;/span&gt;
dat2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;dup &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; duplicated&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;NUTS_ID&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
dat3 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; subset&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; dup &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## rownames&lt;/span&gt;
row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat3&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; dat3&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;NUTS_ID
row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map_nuts2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.character&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map_nuts2&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;NUTS_ID&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## order data&lt;/span&gt;
dat3 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; dat3&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;order&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat3&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
map_nuts2 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; map_nuts2&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;order&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;row.names&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map_nuts2&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## join&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;maptools&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
shape &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; spCbind&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map_nuts2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; dat3&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Munging the shapefile into data.frame and ready for ggplot-plotting&lt;/h2&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;## fortify spatialpolygondataframe into data.frame&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rgeos&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
shape&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;id &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; rownames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;data&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.points &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; fortify&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; region &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; merge&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.points&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; shape&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# As we want to plot map faceted by years from 2003 to 2011 we have to&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# melt it into long format&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;reshape2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.df.l &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; melt&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; map.df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; id.vars &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;long&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;lat&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;group&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; measure.vars &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;X2003&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s&quot;&gt;&amp;quot;X2004&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;X2005&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;X2006&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;X2007&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;X2008&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;X2009&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;X2010&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;X2011&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# year variable (variable) is class string and type X20xx.  Lets remove&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# the X and convert it to numerical&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;stringr&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; str_replace_all&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;X&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; factor&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.numeric&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;levels&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable&lt;span class=&quot;p&quot;&gt;))[&lt;/span&gt;map.df.l&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;variable&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;And finally the plot using ggplot2&lt;/h2&gt;

&lt;p&gt;Map shows proportion of materially deprived households at the NUTS2 level. Grey color indicates missing data.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# plot faceted by year&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;map.df.l&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;group&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;group&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_polygon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;fill &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_polygon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; map.df.l&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;long&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lat&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
               fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
               color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;white&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
               size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# white borders&lt;/span&gt;
  coord_map&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;project&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;orthographic&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; xlim&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
              ylim&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# projection&lt;/span&gt;
  facet_wrap&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;variable&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  theme_minimal&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-07-eurostat-spatial-visualisation/facetmap.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;
</description>
				<pubDate>Wed, 07 Aug 2013 15:00:45 +0400</pubDate>
				<link>http://markuskainu.fi/blog/r-project/2013/08/07/eurostat-spatial-visualisation.html</link>
				<guid isPermaLink="true">http://markuskainu.fi/blog/r-project/2013/08/07/eurostat-spatial-visualisation.html</guid>
			</item>
		
			<item>
				<title>Using SmarterPoland-package in accessing Eurostat data</title>
				<description>&lt;p&gt;&lt;a href=&quot;http://cran.r-project.org/web/packages/SmarterPoland/index.html&quot;&gt;SmarterPoland-package&lt;/a&gt; provides a straghtforward connection to Eurostat data. It is uninformatively described as:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A set of tools developed by the Foundation SmarterPoland.pl
Tools for accessing and processing datasets presented on the blog SmarterPoland.pl.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;But in real terms it has functionality only towards Eurostat. Here is a brief demo how you can search for &lt;em&gt;material deprivation&lt;/em&gt; and then create a line plot at NUTS2 level.&lt;/p&gt;

&lt;h2&gt;Search&lt;/h2&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;SmarterPoland&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
searchresults &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; grepEurostatTOC&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;material deprivation&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; getEurostatRCV&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;kod &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;ilc_mddd21&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Plot at nuts2-level&lt;/h2&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# time variable into numerical&lt;/span&gt;
df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;time &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.numeric&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;levels&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;time&lt;span class=&quot;p&quot;&gt;))[&lt;/span&gt;df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;time&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
cname &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; subset&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; time &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2011&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# plot&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; time&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; geo&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; group &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; geo&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_point&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; 
    geom_line&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; cname&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; time&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; label &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; geo&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
    hjust &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;-0.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; theme&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;legend.position &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;none&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; labs&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;title &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;material deprivation in EU at NUTS2-level&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;population share (%)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; coord_cartesian&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;xlim &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2003&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2012&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; scale_x_continuous&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;breaks &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2003&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2011&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-06-eurostat-smarter-poland/unnamed-chunk-2.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;

&lt;h2&gt;Plot at nuts1-level&lt;/h2&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# subset geo-names only lenght of 2 characters&lt;/span&gt;
df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;geo &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.character&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;geo&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;geo.n &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; nchar&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;geo&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
df &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; subset&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; geo.n &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

cname &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; subset&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; time &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2011&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# plot&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; time&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; geo&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; group &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; geo&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_point&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; 
    geom_line&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; cname&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; time&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; label &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; geo&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
    hjust &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;-0.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; theme&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;legend.position &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;none&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; labs&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;title &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;material deprivation in EU at NUTS2-level&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;population share (%)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; coord_cartesian&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;xlim &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2003&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2012&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; scale_x_continuous&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;breaks &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2003&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2011&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-06-eurostat-smarter-poland/unnamed-chunk-3.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;
</description>
				<pubDate>Tue, 06 Aug 2013 15:00:45 +0400</pubDate>
				<link>http://markuskainu.fi/blog/r-project/2013/08/06/eurostat-smarter-poland.html</link>
				<guid isPermaLink="true">http://markuskainu.fi/blog/r-project/2013/08/06/eurostat-smarter-poland.html</guid>
			</item>
		
			<item>
				<title>Maailmanpankin data WDI-paketilla</title>
				<description>&lt;h1&gt;Tässä esimerkki&lt;/h1&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;WDI&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## Loading required package: RJSONIO
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## Loading required package: methods
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;dat &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; WDI&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;indicator &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;NY.GDP.PCAP.KD&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; country &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;CN&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;RU&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;IN&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;BR&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
    start &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1980&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; end &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2012&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; NY.GDP.PCAP.KD&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; color &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; country&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_line&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_point&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; 
    labs&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;year&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;GDP per capita&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## Warning: Removed 9 rows containing missing values (geom_path).
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;## Warning: Removed 9 rows containing missing values (geom_point).
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figs/2013-08-05-maailmanpankin-data/unnamed-chunk-1.png&quot; alt=&quot;center&quot;&gt; &lt;/p&gt;
</description>
				<pubDate>Mon, 05 Aug 2013 15:00:45 +0400</pubDate>
				<link>http://markuskainu.fi/blog/r-project/2013/08/05/maailmanpankin-data.html</link>
				<guid isPermaLink="true">http://markuskainu.fi/blog/r-project/2013/08/05/maailmanpankin-data.html</guid>
			</item>
		
	</channel>
</rss>

